<style>
  .nowrap th, .nowrap td {
    white-space: nowrap;
  }
</style>
<form action="{?=url(ADMIN.'/inventaris/saveinventarisbarang')?}" method="POST">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Data Barang</h3>
            <ul class="nav nav-tabs">
                <li class="active">
                    <a href="{?=url([ADMIN,'inventaris','inventarisbarang'])?}" role="tab">Data Barang</a>
                </li>
                <li>
                    <a href="{?=url([ADMIN,'inventaris','inventarisjenis'])?}" role="tab">Jenis</a>
                </li>
                <li>
                    <a href="{?=url([ADMIN,'inventaris','inventariskategori'])?}" role="tab">Kategori</a>
                </li>
                <li>
                    <a href="{?=url([ADMIN,'inventaris','inventarismerk'])?}" role="tab">Merk</a>
                </li>
                <li>
                    <a href="{?=url([ADMIN,'inventaris','inventarisprodusen'])?}" role="tab">Produsen</a>
                </li>
                <li>
                    <a href="{?=url([ADMIN,'inventaris','inventarisruang'])?}" role="tab">Ruang</a>
                </li>
            </ul>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Kode Barang</label>
                        <input type="text" name="kode_barang" class="form-control" value="" required />
                    </div>
                    <div class="form-group">
                        <label>Nama Barang</label>
                        <input type="text" name="nama_barang" class="form-control" value="" required />
                    </div>
                    <div class="form-group">
                        <label>Jumlah Barang</label>
                        <input type="text" name="jml_barang" class="form-control" value="" required />
                    </div>
                    <div class="form-group">
                        <label>Produsen</label>
                        <select name="kode_produsen" id="kode_produsen" class="form-control" data-use-search="true">
                          {loop: $produsen}
                            <option value="{?=isset_or($value.kode_produsen)?}">{?=isset_or($value.nama_produsen)?}</option>
                          {/loop}
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Merk</label>
                        <select name="id_merk" id="id_merk" class="form-control" data-use-search="true">
                          {loop: $merk}
                            <option value="{?=isset_or($value.id_merk)?}">{?=isset_or($value.nama_merk)?}</option>
                          {/loop}
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label>Tahun Produksi</label>
                        <input type="text" name="thn_produksi" class="form-control" value="" />
                    </div>
                    <div class="form-group">
                        <label>ISBN</label>
                        <input type="text" name="isbn" class="form-control" value="" />
                    </div>
                    <div class="form-group">
                        <label>Kategori</label>
                        <select name="id_kategori" id="id_kategori" class="form-control" data-use-search="true">
                          {loop: $kategori}
                            <option value="{?=isset_or($value.id_kategori)?}">{?=isset_or($value.nama_kategori)?}</option>
                          {/loop}
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Jenis</label>
                        <select name="id_jenis" id="id_jenis" class="form-control" data-use-search="true">
                          {loop: $jenis}
                            <option value="{?=isset_or($value.id_jenis)?}">{?=isset_or($value.nama_jenis)?}</option>
                          {/loop}
                        </select>
                    </div>
                </div>
                <div class="col-md-12" style="padding-top: 20px;">
                    <input type="submit" name="simpan" class="btn btn-success" value="Simpan" />
                    <input type="submit" name="update" class="btn btn-info" value="Update" />
                    <input type="submit" name="hapus" class="btn btn-danger" value="Hapus" />
                </div>
            </div>
        </div>
    </div>
</form>
<div class="row">
  <div class="col-md-12">
    <div class="table-responsive no-margin" id="inventarisbarang">
      <table class="table table-striped table-bordered no-padding nowrap dataTables" width="100%">
        <thead>
          <tr>
            <th>Kode Barang</th>
            <th>Nama Barang</th>
            <th>Jumlah Barang</th>
            <th>Kode Produsen</th>
            <th>Nama Produsen</th>
            <th>ID Merk</th>
            <th>Nama Merk</th>
            <th>Tahun Produksi</th>
            <th>ISBN</th>
            <th>ID Kategori</th>
            <th>Nama Kategori</th>
            <th>ID Jenis</th>
            <th>Nama Jenis</th>
          </tr>
        </thead>
        <tbody>
          {loop: $inventaris_barang}
          <tr class="inventarisbarang"
          data-kode_barang="{?=isset_or($value.kode_barang)?}"
          data-nama_barang="{?=isset_or($value.nama_barang)?}"
          data-jml_barang="{?=isset_or($value.jml_barang)?}"
          data-kode_produsen="{?=isset_or($value.kode_produsen)?}"
          data-id_merk="{?=isset_or($value.id_merk)?}"
          data-thn_produksi="{?=isset_or($value.thn_produksi)?}"
          data-isbn="{?=isset_or($value.isbn)?}"
          data-id_kategori="{?=isset_or($value.id_kategori)?}"
          data-id_jenis="{?=isset_or($value.id_jenis)?}"
          >
            <td>{?=isset_or($value.kode_barang)?}</td>
            <td>{?=isset_or($value.nama_barang)?}</td>
            <td>{?=isset_or($value.jml_barang)?}</td>
            <td>{?=isset_or($value.kode_produsen)?}</td>
            <td>{?=isset_or($value.nama_produsen)?}</td>
            <td>{?=isset_or($value.id_merk)?}</td>
            <td>{?=isset_or($value.nama_merk)?}</td>
            <td>{?=isset_or($value.thn_produksi)?}</td>
            <td>{?=isset_or($value.isbn)?}</td>
            <td>{?=isset_or($value.id_kategori)?}</td>
            <td>{?=isset_or($value.nama_kategori)?}</td>
            <td>{?=isset_or($value.id_jenis)?}</td>
            <td>{?=isset_or($value.nama_jenis)?}</td>
          </tr>
          {/loop}
        </tbody>
      </table>
    </div>
  </div>
</div>
<script type="text/javascript">
  $("#inventarisbarang").on("click", ".inventarisbarang", function(event){
    var kode_barang  = $(this).attr("data-kode_barang");
    var nama_barang  = $(this).attr("data-nama_barang");
    var jml_barang  = $(this).attr("data-jml_barang");
    var kode_produsen  = $(this).attr("data-kode_produsen");
    var id_merk  = $(this).attr("data-id_merk");
    var thn_produksi  = $(this).attr("data-thn_produksi");
    var isbn  = $(this).attr("data-isbn");
    var id_kategori  = $(this).attr("data-id_kategori");
    var id_jenis  = $(this).attr("data-id_jenis");
    $('input:text[name=kode_barang]').val(kode_barang);
    $('input:text[name=nama_barang]').val(nama_barang);
    $('input:text[name=jml_barang]').val(jml_barang);
    $('#kode_produsen').val(kode_produsen).change();
    $('#id_merk').val(id_merk).change();
    $('input:text[name=thn_produksi]').val(thn_produksi);
    $('input:text[name=isbn]').val(isbn);
    $('#id_kategori').val(id_kategori).change();
    $('#id_jenis').val(id_jenis).change();
    $('input:text[name=kode_barang]').prop('readonly', true);
  });
</script>
