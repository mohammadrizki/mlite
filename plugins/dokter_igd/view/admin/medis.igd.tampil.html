<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <h4 class="modal-title" id="myModalLabel">Assessment Medis IGD - {?=isset_or($medis.nm_pasien)?}</h4>
</div>
<div class="modal-body">
  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Data Assessment</h3>
        </div>
        <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <tr>
                <td width="200"><strong>Tanggal</strong></td>
                <td>{?=isset_or($medis.tanggal)?}</td>
              </tr>
              <tr>
                <td><strong>Dokter</strong></td>
                <td>{?=isset_or($medis.nm_dokter)?}</td>
              </tr>
              <tr>
                <td><strong>Anamnesis</strong></td>
                <td>{?=isset_or($medis.anamnesis)?}</td>
              </tr>
              <tr>
                <td><strong>Hubungan</strong></td>
                <td>{?=isset_or($medis.hubungan)?}</td>
              </tr>
              <tr>
                <td><strong>Keluhan Utama</strong></td>
                <td>{?=isset_or($medis.keluhan_utama)?}</td>
              </tr>
              <tr>
                <td><strong>RPS</strong></td>
                <td>{?=isset_or($medis.rps)?}</td>
              </tr>
              <tr>
                <td><strong>RPD</strong></td>
                <td>{?=isset_or($medis.rpd)?}</td>
              </tr>
              <tr>
                <td><strong>RPK</strong></td>
                <td>{?=isset_or($medis.rpk)?}</td>
              </tr>
              <tr>
                <td><strong>RPO</strong></td>
                <td>{?=isset_or($medis.rpo)?}</td>
              </tr>
              <tr>
                <td><strong>Alergi</strong></td>
                <td>{?=isset_or($medis.alergi)?}</td>
              </tr>
              <tr>
                <td><strong>Keadaan Umum</strong></td>
                <td>{?=isset_or($medis.keadaan)?}</td>
              </tr>
              <tr>
                <td><strong>GCS</strong></td>
                <td>{?=isset_or($medis.gcs)?}</td>
              </tr>
              <tr>
                <td><strong>Kesadaran</strong></td>
                <td>{?=isset_or($medis.kesadaran)?}</td>
              </tr>
              <tr>
                <td><strong>Tekanan Darah</strong></td>
                <td>{?=isset_or($medis.td)?} mmHg</td>
              </tr>
              <tr>
                <td><strong>Nadi</strong></td>
                <td>{?=isset_or($medis.nadi)?} x/menit</td>
              </tr>
              <tr>
                <td><strong>Respirasi</strong></td>
                <td>{?=isset_or($medis.rr)?} x/menit</td>
              </tr>
              <tr>
                <td><strong>Suhu</strong></td>
                <td>{?=isset_or($medis.suhu)?} Â°C</td>
              </tr>
              <tr>
                <td><strong>SpO2</strong></td>
                <td>{?=isset_or($medis.spo)?} %</td>
              </tr>
              <tr>
                <td><strong>Berat Badan</strong></td>
                <td>{?=isset_or($medis.bb)?} kg</td>
              </tr>
              <tr>
                <td><strong>Tinggi Badan</strong></td>
                <td>{?=isset_or($medis.tb)?} cm</td>
              </tr>
            </table>
          </div>
          
          <h4>Pemeriksaan Fisik</h4>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <tr>
                <td width="200"><strong>Kepala</strong></td>
                <td>{?=isset_or($medis.kepala)?}</td>
              </tr>
              <tr>
                <td><strong>Mata</strong></td>
                <td>{?=isset_or($medis.mata)?}</td>
              </tr>
              <tr>
                <td><strong>Gigi</strong></td>
                <td>{?=isset_or($medis.gigi)?}</td>
              </tr>
              <tr>
                <td><strong>Leher</strong></td>
                <td>{?=isset_or($medis.leher)?}</td>
              </tr>
              <tr>
                <td><strong>Thoraks</strong></td>
                <td>{?=isset_or($medis.thoraks)?}</td>
              </tr>
              <tr>
                <td><strong>Abdomen</strong></td>
                <td>{?=isset_or($medis.abdomen)?}</td>
              </tr>
              <tr>
                <td><strong>Genital</strong></td>
                <td>{?=isset_or($medis.genital)?}</td>
              </tr>
              <tr>
                <td><strong>Ekstremitas</strong></td>
                <td>{?=isset_or($medis.ekstremitas)?}</td>
              </tr>
              <tr>
                <td><strong>Keterangan Fisik</strong></td>
                <td>{?=isset_or($medis.ket_fisik)?}</td>
              </tr>
              <tr>
                <td><strong>Keterangan Lokalis</strong></td>
                <td>{?=isset_or($medis.ket_lokalis)?}</td>
              </tr>
            </table>
          </div>
          
          <h4>Pemeriksaan Penunjang</h4>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <tr>
                <td width="200"><strong>EKG</strong></td>
                <td>{?=isset_or($medis.ekg)?}</td>
              </tr>
              <tr>
                <td><strong>Radiologi</strong></td>
                <td>{?=isset_or($medis.rad)?}</td>
              </tr>
              <tr>
                <td><strong>Laboratorium</strong></td>
                <td>{?=isset_or($medis.lab)?}</td>
              </tr>
            </table>
          </div>
          
          <h4>Diagnosis & Tatalaksana</h4>
          <div class="table-responsive">
            <table class="table table-striped table-bordered">
              <tr>
                <td width="200"><strong>Diagnosis</strong></td>
                <td>{?=isset_or($medis.diagnosis)?}</td>
              </tr>
              <tr>
                <td><strong>Tatalaksana</strong></td>
                <td>{?=isset_or($medis.tata)?}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-warning" id="edit_assessment" data-no_rawat="{?=isset_or($medis.no_rawat)?}"><i class="fa fa-edit"></i> Edit</button>
  <button type="button" class="btn btn-danger" id="hapus_assessment" data-no_rawat="{?=isset_or($medis.no_rawat)?}"><i class="fa fa-trash"></i> Hapus</button>
  <button type="button" class="btn btn-default" data-dismiss="modal">Tutup</button>
</div>

<script type="text/javascript">
  // Handler untuk tombol Edit
  $("#edit_assessment").click(function(){
    var baseURL = mlite.url + '/' + mlite.admin;
    var no_rawat = $(this).data('no_rawat');
    var loadURL = baseURL + '/dokter_igd/medisigd/' + no_rawat.replaceAll('/','') + '?t=' + mlite.token;
    
    $('#assessmentModal .modal-content').load(loadURL);
  });
  
  // Handler untuk tombol Hapus
  $("#hapus_assessment").click(function(){
    var baseURL = mlite.url + '/' + mlite.admin;
    var no_rawat = $(this).data('no_rawat');
    
    if(confirm('Apakah Anda yakin ingin menghapus data assessment ini?')){
      $.post(baseURL + '/dokter_igd/hapusmedisigd?t=' + mlite.token, {
        no_rawat: no_rawat
      }, function(data){
        if(data.status == 'success'){
          $('#assessmentModal').modal('hide');
          alert('Data assessment berhasil dihapus!');
        } else {
          alert('Gagal menghapus data assessment!');
        }
      }, 'json');
    }
  });
</script>